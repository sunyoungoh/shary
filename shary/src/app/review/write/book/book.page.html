<ion-header>
  <ion-toolbar translucent>
    <ion-buttons slot="start">
        <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>새로운 리뷰</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="onSubmit()" [disabled]="!reviewForm.valid">
        저장
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <div>
    <ion-item lines="none">
      <ion-icon name="search" slot="end" (click)="openSearchBookModal()"></ion-icon>
    </ion-item>
  </div>
</ion-header>

<ion-content fullscreen>

  <form [formGroup]="reviewForm">
    <ion-grid>
      <!-- <ion-input hidden value="{{rating}}" formControlName="review_score"></ion-input> -->
      <ion-row>
        <ion-col size='4'>
          <div class="image-wrap">
            <img [src]="book?.image" *ngIf="book?.image; else defaultImage">
          </div>
          <ng-template #defaultImage>
            <div class="default-image">
              <p>No</p>
              <p>Image</p>
            </div>
          </ng-template>
          <ion-input hidden value="{{book?.image}}" formControlName="image"></ion-input>
        </ion-col>
        <ion-col size='8'>
          <ion-item>
            <ion-input placeholder="제목" value="{{book?.title}}" formControlName="title"></ion-input>
          </ion-item>
          <ion-item>
            <ion-input placeholder="저자" class="author" value="{{book?.author}}" formControlName="author"></ion-input>
          </ion-item>
          <ion-item>
            <ion-input placeholder="출판사" class="pub" value="{{book?.publisher}}" formControlName="publisher">
            </ion-input>
          </ion-item>
          <ion-item>
            <ion-datetime class="pub" [doneText]="'저장'" [cancelText]="'취소'" [pickerOptions]="dateOptions"
              displayFormat="YYYY-MM-DD" placeholder="출판일" value="{{book?.pubdate | date : 'yyyy-MM-dd'}}"
              formControlName="pubdate">
            </ion-datetime>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-item class="textarea">
            <ion-label position="fixed">줄거리</ion-label>
          </ion-item>
          <ion-item class="textarea">
            <ion-textarea rows="6" cols="20" class="book?-description" placeholder="줄거리..." value="{{book?.description}}"
              formControlName="description"></ion-textarea>
          </ion-item>
          <ion-item>
            <ion-label>독서 시작일</ion-label>
            <ion-datetime [doneText]="'저장'" [cancelText]="'취소'" [pickerOptions]="dateOptions" displayFormat="YYYY-MM-DD"
              placeholder="YYYY-MM-DD" value="{{nowDate}}" formControlName="readingStartDate">
            </ion-datetime>
          </ion-item>
          <ion-item>
            <ion-label>독서 종료일</ion-label>
            <ion-datetime [doneText]="'저장'" [cancelText]="'취소'" [pickerOptions]="dateOptions" displayFormat="YYYY-MM-DD"
              placeholder="YYYY-MM-DD" value="{{nowDate}}" formControlName="readingEndDate"></ion-datetime>
          </ion-item>
          <ion-item>
            <ion-label position="fixed">금액</ion-label>
            <ion-input type="text" value="{{book?.price | number:'2.'}}" formControlName="price" text-right></ion-input>
            <span>원</span>
          </ion-item>
          <ion-item class="textarea">
            <ion-label position="fixed">인상 깊은 구절</ion-label>
          </ion-item>
          <ion-item class="textarea">
            <ion-textarea rows="2" cols="20" placeholder="..." formControlName="impressivePassage">
            </ion-textarea>
          </ion-item>
          <ion-item class="textarea">
            <ion-label position="fixed">감상평</ion-label>
          </ion-item>
          <ion-item class="textarea">
            <ion-textarea rows="4" cols="20" placeholder="..." formControlName="review">
            </ion-textarea>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">태그</ion-label>
            <ion-input type="text" formControlName="tags"></ion-input>
          </ion-item>
          <p class="tag-notice"> 태그는 쉼표(,) 를 통해 구분되며 쉼표의 앞뒤에 있는 빈칸은 무시됩니다.</p>
        </ion-col>
      </ion-row>
      <ion-label>사진</ion-label>
    </ion-grid>
  </form>

</ion-content>